#!/bin/bash

set -e

trap 'echo ""; echo -e "\033[0;31mSomething went wrong during the update!\n\nPlease review the output above carefully, correct the error, and retry the update.\n"' ERR

shellos-update-confirm
shellos-snapshot create || [ $? -eq 127 ]
shellos-update-git
shellos-update-perform
